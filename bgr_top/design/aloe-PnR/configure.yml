#=========================================================================
# Cadence Innovus
#=========================================================================
# Author : Christopher Torng
# Date   : October 30, 2019
#

name: aloe-PnR

#-------------------------------------------------------------------------
# Inputs and Outputs
#-------------------------------------------------------------------------

inputs:
  - innovus-foundation-flow
  - adk
  - design.sdc
  - design.checkpoint
  - design.fp
  - design.fpr
  - design.def
  - design.v

outputs:
  - design.checkpoint

#-------------------------------------------------------------------------
# Commands
#-------------------------------------------------------------------------

commands:
  # - ln -sf inputs/innovus-foundation-flow
  # - rm inputs/innovus-foundation-flow/INNOVUS/run_place.tcl
  # - cp cust_run_place.tcl inputs/innovus-foundation-flow/INNOVUS/run_place.tcl

  # - echo $0
  # # - python run_pnr_optimization.py
  - innovus -overwrite -64 -nowin -init start.tcl -cpus 8 -log logs/run.log
  # - bash parallel_run.sh

  # Outputs
  - cd outputs
  - ln -sf ../checkpoints/design.checkpoint

#-------------------------------------------------------------------------
# Parameters
#-------------------------------------------------------------------------

parameters:
  useful_skew: True
  order:
    - netweight.tcl
    - pnr.tcl
    - interface.tcl
    - reporting.tcl
  cell_padding: 2 # how much padding to add to specified cells

#-------------------------------------------------------------------------
# Debug
#-------------------------------------------------------------------------

debug:
  - innovus -overwrite -64
    -init innovus-foundation-flow/custom-scripts/run-debug.tcl
    -log logs/debug.log

#-------------------------------------------------------------------------
# Assertions
#-------------------------------------------------------------------------

preconditions:

  - assert Tool( 'innovus' )                         # tool check
  - assert File( 'inputs/innovus-foundation-flow' )  # must exist
  - assert File( 'inputs/adk' )                      # must exist
  - assert File( 'inputs/design.sdc' )               # must exist
  - assert File( 'inputs/design.checkpoint' )        # must exist

postconditions:

  # - assert File( 'outputs/design.checkpoint' )       # must exist


